#summary Instructions on how to build MAO.

= Build instructions =

MAO reuses code from the GNU Binutils (currently v2.19.1) for parsing an input assembly 
file. Before building MAO, it is necessary to download Binutils, and patch the sources using a provided patch (see instructions below).

MAO currently supports i686 and x86_64 targets on Linux and Mac OS X (only tested on Leopard). Please note any host-specific instructions below.

{{{
#
#=========================================================
# MAO Sources
#=========================================================

# Set target to i686-linux or x86_64
TARGET=x86_64-linux

# On MacOS, please set the following required flag:
# BINUTILS_CONF_FLAGS=-disable-nls
# otherwise, clear the flag:
BINUTILS_CONF_FLAGS=

mkdir MAO
cd MAO

# If you haven't downloaded the source for mao:
# See http://code.google.com/p/mao/source/checkout for more info
svn checkout https://mao.googlecode.com/svn/trunk/ . --username your.name

#=========================================================
# GNU Binutils sources
#=========================================================
# Fetch and patch binutils sources.
wget http://ftp.gnu.org/gnu/binutils/binutils-2.19.1.tar.gz
gzip -dc binutils-2.19.1.tar.gz | tar xvf -
(cd binutils-2.19.1 && patch -p1  < ../data/binutils-2.19.1-mao.patch)

# Configure modified binutils.
(mkdir binutils-2.19.1-obj-${TARGET}
cd binutils-2.19.1-obj-${TARGET}
../binutils-2.19.1/configure --target=${TARGET} ${BINUTILS_CONF_FLAGS}
make)

# Build MAO
cd src

make TARGET=${TARGET}
#or
make TARGET=${TARGET} OS=MacOS
}}}

Now, goto RunMao for information on how use the MAO binary in MAO/bin/.